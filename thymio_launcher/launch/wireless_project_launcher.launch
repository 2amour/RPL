<launch>
	<arg name="output" default="screen" />	
	<!-- Map Launch -->
	<arg name="map_file" default="$(find thymio_launcher)/map/testenvironment.yaml"/>
	<node name="map_server" pkg="map_server" type="map_server" args="$(arg map_file)" />
	
	<!-- RVIZ Launcher -->
	<arg name="config_file" default="$(find thymio_launcher)/config/project.rviz" />
	<node name="rviz" pkg="rviz" type="rviz" args="-d $(arg config_file)"/>

	<!-- Thymio Driver -->
	<include file="$(find roboscoop_ros)/launch/thymio_driver.launch"/>

	<!-- Tfs -->
	<node pkg="tf" type="static_transform_publisher" name="odometry_link_map_broadcaster" args="0.5 0.5 0.0 0.0 0.0 0.0 /map /odometry_link 10" />
	<node pkg="tf" type="static_transform_publisher" name="camera_link_base_broadcaster" args="0.0 0.0 0.14 0.0 0.0 0.0 /camera_link /base_link 10" />

	<!-- Object recognition Launcher -->
	<arg name="model_file" default="stack_classes.txt" />
	<arg name="model_path" default="$(find object_recognition)/image_classes/$(arg model_file)" />
	<rosparam command="load" file="$(find object_recognition)/parameters/object_recognition_parameters.yaml" />
	<node name="spin_recognition" pkg="object_recognition" type="spin_recognition" args="$(arg model_path)" output="$(arg output)"/>

	<!-- Mission Planner -->
	<arg name="mission_planner_parameters" default="$(find roboscoop_ros)/parameters/mission_planner/parameters.txt" />	
	<arg name="mission_planner_topics" default="$(find roboscoop_ros)/parameters/mission_planner/topics.txt" />	
	<node name="mission_planner" pkg="roboscoop_ros" type="mission_planner" args="$(arg mission_planner_parameters) $(arg mission_planner_topics)" output="$(arg output)"/>
	<!-- Path Planner -->
	<arg name="path_planner_parameters" default="$(find roboscoop_ros)/parameters/path_planner/parameters.txt" />	
	<arg name="map_parameters" default="$(find roboscoop_ros)/parameters/path_planner/map_parameters.txt" />	
	<arg name="path_planner_topics" default="$(find roboscoop_ros)/parameters/path_planner/topics.txt" />	
	<node name="path_planner" pkg="roboscoop_ros" type="path_planner" args="$(arg mission_planner_parameters) $(arg map_parameters) $(arg mission_planner_topics)" output="$(arg output)"/>
	<!-- Robot controller -->
	<arg name="robot_controller_parameters" default="$(find roboscoop_ros)/parameters/robot_controller/files_parameters.txt" />	
	<node name="robot_controller" pkg="roboscoop_ros" type="robot_controller" args="$(arg robot_controller_parameters)" output="$(arg output)"/>
</launch>
